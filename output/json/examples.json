[
  {
    "tree": [
      "interactions-and-bot-users",
      "receiving-an-interaction"
    ],
    "name": "Receiving an Interaction",
    "language": "py",
    "content": "@app.route('/', methods=['POST'])\ndef my_command():\n    if request.json[\"type\"] == 1:\n        return jsonify({\n            \"type\": 1\n        })"
  },
  {
    "tree": [
      "interaction-response-object-modal"
    ],
    "name": "Modal",
    "language": "py",
    "content": "import requests\n\nurl = \"https://discord.com/api/v8/interactions/<interaction_id>/<interaction_token>/callback\"\n\njson = {\n    \"type\": 4,\n    \"data\": {\n        \"content\": \"Congrats on sending your command!\"\n    }\n}\nr = requests.post(url, json=json)"
  },
  {
    "tree": [
      "followup-messages",
      "security-and-authorization"
    ],
    "name": "Security and Authorization",
    "language": "py",
    "content": "from nacl.signing import VerifyKey\nfrom nacl.exceptions import BadSignatureError\n\n# Your public key can be found on your application in the Developer Portal\nPUBLIC_KEY = 'APPLICATION_PUBLIC_KEY'\n\nverify_key = VerifyKey(bytes.fromhex(PUBLIC_KEY))\n\nsignature = request.headers[\"X-Signature-Ed25519\"]\ntimestamp = request.headers[\"X-Signature-Timestamp\"]\nbody = request.data.decode(\"utf-8\")\n\ntry:\n    verify_key.verify(f'{timestamp}{body}'.encode(), bytes.fromhex(signature))\nexcept BadSignatureError:\n    abort(401, 'invalid request signature')"
  }
]